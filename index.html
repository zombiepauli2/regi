<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Twitch Regex Generator</title>
<style>
  :root {
    --bg: #0e0e10;
    --card: #18181b;
    --text: #e5e5e5;
    --accent: #9146ff;
    --border: #2a2a2d;
    --input: #1f1f23;
  }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: system-ui, sans-serif;
    margin: 0;
    padding: 20px;
  }
  h1 { color: var(--accent); }
  .container { max-width: 900px; margin: 0 auto; }
  .card {
    background: var(--card);
    padding: 16px;
    border-radius: 10px;
    margin-bottom: 20px;
    border: 1px solid var(--border);
  }
  label { display: block; margin: 10px 0 5px; font-weight: bold; }
  input[type="text"], textarea, select {
    width: 100%;
    padding: 8px;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: var(--input);
    color: var(--text);
  }
  button {
    background: var(--accent);
    border: none;
    padding: 10px 16px;
    color: white;
    border-radius: 6px;
    margin-top: 10px;
    cursor: pointer;
  }
  .result {
    background: #111;
    padding: 10px;
    border-radius: 6px;
    margin-top: 10px;
    font-family: monospace;
    white-space: pre-wrap;
    border: 1px solid var(--border);
  }
  .checkboxes label {
    display: block;
    margin: 4px 0;
    font-weight: normal;
  }
</style>
</head>
<body>
<div class="container">
  <h1>Twitch Regex Generator</h1>
  <div class="card">
    <label>Bausteine wählen:</label>
    <div class="checkboxes">
      <label><input type="checkbox" id="time" checked> Zeitstempel (z.B. 12:34:56)</label>
      <label><input type="checkbox" id="user" checked> Username</label>
      <label><input type="checkbox" id="message" checked> Nachricht</label>
    </div>
    
    <label>Flags:</label>
    <input type="text" id="flags" value="gm" placeholder="z.B. gm für global + multiline">
    
    <button onclick="generateRegex()">Regex generieren</button>
    
    <div class="result" id="regexResult"></div>
  </div>

  <div class="card">
    <label>Beispiel-Logs zum Testen:</label>
    <textarea id="testText" placeholder="Hier Logs einfügen..."></textarea>
    <button onclick="testRegex()">Regex testen</button>
    <div class="result" id="testResult"></div>
  </div>
</div>

<script>
function generateRegex() {
  let parts = [];
  if (document.getElementById('time').checked) {
    parts.push("(?<time>\\d{2}:\\d{2}:\\d{2})");
  }
  if (document.getElementById('user').checked) {
    parts.push("(?<user>[^:]+)");
  }
  if (document.getElementById('message').checked) {
    parts.push("(?<message>.*)");
  }
  
  let pattern = "^" + parts.join("\\s+") + "$";
  let flags = document.getElementById('flags').value;
  
  document.getElementById('regexResult').textContent = "/" + pattern + "/" + flags;
  return { pattern, flags };
}

function testRegex() {
  let { pattern, flags } = generateRegex();
  let testText = document.getElementById('testText').value.split(/\n/);
  let output = "";
  
  try {
    let re = new RegExp(pattern, flags);
    for (let line of testText) {
      if (!line.trim()) continue;
      let m = re.exec(line);
      if (m) {
        output += "✔ " + line + "\n";
        if (m.groups) {
          for (let [k,v] of Object.entries(m.groups)) {
            output += "  " + k + ": " + v + "\n";
          }
        }
      } else {
        output += "✘ " + line + "\n";
      }
    }
  } catch (e) {
    output = "Ungültige Regex: " + e.message;
  }
  
  document.getElementById('testResult').textContent = output;
}
</script>
</body>
</html>

